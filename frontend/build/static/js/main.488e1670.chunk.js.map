{"version":3,"sources":["components/FormContainer.js","components/Loader.js","api/index.js","api/userApi.js","pages/LoginPage.js","pages/RegisterPage.js","pages/HomePage.js","routes.js","components/Header.js","App.js","store/UserStore.js","index.js"],"names":["FormContainer","children","Container","Row","className","Col","xs","md","Loader","Spinner","animation","role","style","width","height","margin","display","axios","create","baseURL","interceptors","request","use","config","headers","authorization","localStorage","getItem","registration","email","password","confirmPassword","a","post","data","setItem","token","login","getMe","get","getPhotos","uploadPhotos","image","LoginPage","observer","history","useHistory","user","useContext","Context","useState","error","setError","loading","setLoading","formData","setFormData","handleChange","e","target","name","value","submitHandler","preventDefault","response","setUser","setIsAuth","push","message","setTimeout","Form","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","Alert","variant","Button","to","RegisterPage","defaultImage","HomePage","imagePreview","setImagePreview","useEffect","images","setPhotos","sendFile","FormData","append","files","URL","createObjectURL","src","alt","photos","map","photo","AppRouter","isAuth","path","exact","component","Header","Navbar","bg","expand","Brand","Collapse","id","Nav","Link","onClick","removeItem","App","then","finally","UserStore","this","_isAuth","_user","_photos","makeAutoObservable","bool","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.488e1670.chunk.js","sourcesContent":["import React from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nexport const FormContainer = ({ children }) => {\n  return (\n    <Container>\n      <Row className='justify-content-md-center'>\n        <Col xs={12} md={6}>\n          {children}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n","import React from 'react';\nimport { Spinner } from 'react-bootstrap';\n\nexport const Loader = () => {\n  return (\n    <Spinner\n      animation='border'\n      role='status'\n      style={{\n        width: '100px',\n        height: '100px',\n        margin: 'auto',\n        display: 'block',\n      }}\n    >\n      <span className='sr-only'>Loading...</span>\n    </Spinner>\n  );\n};\n","import axios from 'axios';\n\naxios.create({\n  baseURL: 'https://image-gallery-mern.herokuapp.com/',\n});\n\naxios.interceptors.request.use(config => {\n  config.headers.authorization = `Bearer ${localStorage.getItem('token')}`;\n  return config;\n});\n\nexport { axios };\n","import { axios } from './index.js';\n\nexport const registration = async (email, password, confirmPassword) => {\n  const { data } = await axios.post('/register', {\n    email,\n    password,\n    confirmPassword,\n  });\n  localStorage.setItem('token', data.token);\n  return data;\n};\n\nexport const login = async (email, password) => {\n  const { data } = await axios.post('/login', {\n    email,\n    password,\n  });\n  localStorage.setItem('token', data.token);\n  return data;\n};\n\nexport const getMe = async () => {\n  const { data } = await axios.get('/auth');\n  return data;\n};\n\nexport const getPhotos = async () => {\n  const { data } = await axios.get('/photos');\n\n  return data;\n};\nexport const uploadPhotos = async image => {\n  const { data } = await axios.post('/upload', image, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n\n  return data;\n};\n","import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Alert } from 'react-bootstrap';\nimport { FormContainer } from '../components/FormContainer';\nimport { Loader } from '../components/Loader';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport { login } from '../api/userApi';\n\nexport const LoginPage = observer(() => {\n  const history = useHistory();\n  const { user } = useContext(Context);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const initialData = {\n    email: '',\n    password: '',\n  };\n  const [formData, setFormData] = useState(initialData);\n\n  const handleChange = e => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n  const submitHandler = async e => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      const response = await login(formData.email, formData.password);\n      user.setUser(response);\n      user.setIsAuth(true);\n      history.push('/photos');\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError(error.response.data.message);\n      setTimeout(() => {\n        setError(null);\n      }, 5000);\n    }\n  };\n\n  return (\n    <FormContainer>\n      <h1>Вход</h1>\n\n      <Form onSubmit={submitHandler}>\n        <Form.Group controlId='email'>\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            name='email'\n            type='email'\n            placeholder='Введите email'\n            onChange={handleChange}\n          ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='password'>\n          <Form.Label>Пароль</Form.Label>\n          <Form.Control\n            name='password'\n            type='password'\n            placeholder='Введите пароль'\n            onChange={handleChange}\n          ></Form.Control>\n        </Form.Group>\n        {error && <Alert variant='danger'>{error}</Alert>}\n        {loading ? (\n          <Loader />\n        ) : (\n          <Button type='submit' variant='primary'>\n            Войти\n          </Button>\n        )}\n\n        <Row className='py-3'>\n          <Col>\n            Новый пользователь? <Link to='/register'>Регистрация</Link>\n          </Col>\n        </Row>\n      </Form>\n    </FormContainer>\n  );\n});\n","import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Alert } from 'react-bootstrap';\nimport { FormContainer } from '../components/FormContainer';\nimport { Loader } from '../components/Loader';\nimport { registration } from '../api/userApi';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\n\nexport const RegisterPage = observer(() => {\n  const history = useHistory();\n  const { user } = useContext(Context);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const initialData = {\n    email: '',\n    password: '',\n    confirmPassword: '',\n  };\n  const [formData, setFormData] = useState(initialData);\n\n  const handleChange = e => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n  const submitHandler = async e => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      const response = await registration(\n        formData.email,\n        formData.password,\n        formData.confirmPassword\n      );\n      user.setUser(response);\n      user.setIsAuth(true);\n      history.push('/photos');\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError(error.response.data.message);\n      setTimeout(() => {\n        setError(null);\n      }, 5000);\n    }\n  };\n\n  return (\n    <FormContainer>\n      <h1>Регистрация</h1>\n\n      <Form onSubmit={submitHandler}>\n        <Form.Group controlId='email'>\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            name='email'\n            type='email'\n            placeholder='Введите email'\n            onChange={handleChange}\n          ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='password'>\n          <Form.Label>Пароль</Form.Label>\n          <Form.Control\n            name='password'\n            type='password'\n            placeholder='Введите пароль'\n            onChange={handleChange}\n          ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='confirmPassword'>\n          <Form.Label>Подтвердите пароль</Form.Label>\n          <Form.Control\n            name='confirmPassword'\n            type='password'\n            placeholder='Подтвердите пароль'\n            onChange={handleChange}\n          ></Form.Control>\n        </Form.Group>\n        {error && <Alert variant='danger'>{error}</Alert>}\n        {loading ? (\n          <Loader />\n        ) : (\n          <Button type='submit' variant='primary'>\n            Регистрация\n          </Button>\n        )}\n        <Row className='py-3'>\n          <Col>\n            Уже есть аккаунт? <Link to='/login'>Вход</Link>\n          </Col>\n        </Row>\n      </Form>\n    </FormContainer>\n  );\n});\n","import React, { useContext, useEffect, useState } from 'react';\nimport { getPhotos, uploadPhotos } from '../api/userApi';\nimport { Loader } from '../components/Loader';\nimport { Context } from '..';\nimport { observer } from 'mobx-react-lite';\nimport { Alert } from 'react-bootstrap';\n\nconst defaultImage =\n  'https://www.khdkelectronics.com/upload/no-image-available_preview_fit_800x800.png';\n\nexport const HomePage = observer(() => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [imagePreview, setImagePreview] = useState(defaultImage);\n  const { user } = useContext(Context);\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const { images } = await getPhotos();\n      user.setPhotos(images);\n      setLoading(false);\n    })();\n  }, [user]);\n\n  const sendFile = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n\n    formData.append('image', e.target[0].files[0]);\n\n    try {\n      setLoading(true);\n      const { images } = await uploadPhotos(formData);\n      user.setPhotos(images);\n      setImagePreview(defaultImage);\n      setLoading(false);\n    } catch (e) {\n      setError(e.response.data.message);\n      setTimeout(() => {\n        setError(null);\n      }, 5000);\n    }\n  };\n  const inputImageHandler = e => {\n    if (e.target.files[0]) {\n      setImagePreview(URL.createObjectURL(e.target.files[0]));\n    }\n  };\n  return (\n    <div>\n      <div className='input-container'>\n        <form onSubmit={sendFile} className='image-form'>\n          <input name='input' type='file' onChange={inputImageHandler} />\n\n          <button className='image-btn' type='submit'>\n            Отправить\n          </button>\n        </form>\n        <div className='image-preview'>\n          <img src={imagePreview} alt='' />\n        </div>\n      </div>\n      {error && <Alert variant='danger'>{error}</Alert>}\n      {loading ? (\n        <Loader />\n      ) : (\n        <div className='photos'>\n          {user.photos.map(photo => {\n            return (\n              <div className='photo' key={photo}>\n                <img src={photo} alt='' />\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n});\n","import React, { useContext } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { LoginPage } from './pages/LoginPage';\nimport { RegisterPage } from './pages/RegisterPage';\nimport { Context } from './index';\nimport { observer } from 'mobx-react-lite';\nimport { HomePage } from './pages/HomePage';\n\nexport const AppRouter = observer(() => {\n  const { user } = useContext(Context);\n\n  if (user.isAuth) {\n    return (\n      <Switch>\n        <Route path='/' exact component={HomePage}></Route>\n        <Redirect to='/' />\n      </Switch>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path='/register' exact component={RegisterPage} />\n      <Route to='/login' exact component={LoginPage} />\n    </Switch>\n  );\n});\n","import React, { useContext } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Navbar, Nav, Container } from 'react-bootstrap';\nimport { Context } from '../index';\nimport { observer } from 'mobx-react-lite';\n\nexport const Header = observer(() => {\n  const { user } = useContext(Context);\n\n  const logoutHandler = () => {\n    user.setUser({});\n    user.setIsAuth(false);\n    localStorage.removeItem('token');\n  };\n  return (\n    <Navbar bg='light' expand='lg' className='mb-4'>\n      <Container>\n        <LinkContainer to='/'>\n          <Navbar.Brand>Image Gallery</Navbar.Brand>\n        </LinkContainer>\n        <Navbar.Collapse id='basic-navbar-nav'>\n          {!user.isAuth ? (\n            <Nav className='ml-auto'>\n              <LinkContainer to='/login'>\n                <Nav.Link>Войти</Nav.Link>\n              </LinkContainer>\n              <LinkContainer to='/register'>\n                <Nav.Link>Зарегистрироваться</Nav.Link>\n              </LinkContainer>\n            </Nav>\n          ) : (\n            <Nav className='ml-auto'>\n              <LinkContainer to='/photos'>\n                <Nav.Link>Фотографии</Nav.Link>\n              </LinkContainer>\n              <LinkContainer to='/logout'>\n                <Nav.Link onClick={logoutHandler}>Выйти</Nav.Link>\n              </LinkContainer>\n            </Nav>\n          )}\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n});\n","import React, { useContext, useEffect, useState } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { AppRouter } from './routes';\nimport { Header } from './components/Header';\nimport { Loader } from './components/Loader';\nimport { Context } from './index';\nimport { getMe } from './api/userApi';\n\nimport './App.css';\n\nconst App = observer(() => {\n  const { user } = useContext(Context);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getMe()\n      .then(data => {\n        user.setUser(data);\n        user.setIsAuth(true);\n      })\n      .finally(() => setLoading(false));\n  }, [user]);\n\n  if (loading) return <Loader />;\n  return (\n    <Router>\n      <div className='App'>\n        <Header />\n        <AppRouter />\n      </div>\n    </Router>\n  );\n});\n\nexport default App;\n","import { makeAutoObservable } from 'mobx';\n\nexport default class UserStore {\n  constructor() {\n    this._isAuth = false;\n    this._user = {};\n    this._photos = [];\n    makeAutoObservable(this);\n  }\n\n  setIsAuth(bool) {\n    this._isAuth = bool;\n  }\n  setUser(user) {\n    this._user = user;\n  }\n  setPhotos(photos) {\n    this._photos = photos;\n  }\n\n  get isAuth() {\n    return this._isAuth;\n  }\n  get user() {\n    return this._user;\n  }\n  get photos() {\n    return this._photos;\n  }\n}\n","import React, { createContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport UserStore from './store/UserStore';\n\nexport const Context = createContext(null);\n\nReactDOM.render(\n  <Context.Provider\n    value={{\n      user: new UserStore(),\n    }}\n  >\n    <App />\n  </Context.Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}